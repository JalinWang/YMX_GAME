## 茂总 C++代码规范 v1.0 2018.8.23

# 排版

1. 程序块要采用缩进风格编写, 缩进的空格数为 4 个。

2. 相对独立的程序块之间、变量说明之后必须加空行。

3. 较长的语句 (>80 字符) 要分成多行书写, 长表达式要在低优先级操作符处划分新行, 操作符放在新行之首,  划分出的新行要进行适当的缩进, 使排版整齐, 语句可读。

4. 循环、判断等语句中若有较长的表达式或语句, 则要进行适应的划分, 长表达式要在低优先级操作符处  划分新行, 操作符放在新行之首。

5. 若函数或过程中的参数较长, 则要进行适当的划分。

6. 不允许把多个短语句写在一行中, 即一行只写一条语句。(类成员函数可能例外，见后文)

7. if、for、do、while、case、switch、default 等语句自占一行, 且 if、for、do、while 等语句的执行语 句部分无论多少都要加括号 {}。

8. 程序块的分界符 (如 C/C++ 语言的大括号‘{’ 和‘}’ ) 应各独占一行并且位于同一列, 同时与引用它们的语句左对齐。在函数体的开始、类的定义、结构的定义、枚举的定义以及 if、for、do、while、switch、case 语句中的程序都要采用如上的缩进方式。

9. 函数或过程的开始、结构的定义及循环、判断等语句中的代码都要采用缩进风格, case 语句下的情况处理语句也要遵从语句缩进要求。
类成员函数如果特别短小（一个return语句），在.h文件中可以写成一行。

10. 不要用Tab

11. 在两个以上的关键字、变量、常量进行对等操作时, 它们之间的操作符之前、之后或者前后要加空格;. 进行非对等操作时, 如果是关系密切的立即操作符 (如 ->), 后不应加空格。

	(1) 逗号、分号只在后面加空格。
	int a, b, c;

	(2) 比较操作符, 赋值操作符 “=”、“+=”, 算术操作符“+”、“%”, 逻辑操作符“&&”、“&”, 位域操作符“<<”、“^” 等双目操作符的前后加空格。
	if (current_time >= MAX_TIME_VALUE)
	a = b + c;
	a *= 2;
	a = b ^ 2;

	(3) "!"、"~"、"++"、"--"、"&"(地址运算符) 等单目操作符前后不加空格。
	*p = 'a';        // 内容操作 "*" 与内容之间
	flag = !isEmpty; // 非操作 "!" 与内容之间
	p = &mem;        // 地址操作 "&" 与内容之间
	i++;             // "++", "--" 与内容之间

	(4) "->"、"." 前后不加空格。
	p->id = pid;     // "->" 指针前后不加空格

	(5) if、for、while、switch 等与后面的括号间应加空格, 使 if 等关键字更为突出、明显。
	if (a>= b && c > d)

12. inline，template 单独一行

13. 包含逻辑运算符、位运算符的表达式如果较长，用 ‘(’ 和‘)’ 进行分隔
 

#命名规范

1. 文件命名规则
  文件名全部小写，可以含下划线或连字符，按项目约定命名,且尽量保证文件名明确。比如：

cmd_save_player_info_class.cc                  my_use_full_class.cc 

定义类的文件名一般是成对出现，如：foo_bar.h   foo_bar.cc  

2. 类命名规则
  类型命名采取大驼峰法，每个单词首字母大写，不含下划线，以名词形式。比如： MyPalyerManager，这对于所有类型命名一样，类结构体，枚举，类定义都是如此，比如：MyExcitingEnum

3. 变量命名规则

变量名一律用小驼峰法，每个单词首字母大写，不含下划线，以名词形式，例如：int playerId; 
特殊的是类成员变量，前跟下划线区别普通变量，比如：_playerName

全局变量则以  g_  开头，比如 ：   g_systemTime

当然结构体(struct，数据结构，聚合类)成员变量还是和普通变量一样,比如：string name;   int numEntries;

4. 常量命名规则
k后面跟大写字母开头的单词，比如：

const int k_daysInAWeek=7;

const string k_companyName="Tecent";

5. 函数命名规则
常规函数每个单词首字母大写，使用命令式语气，比如：OpenFile()   CheckFileName()，

而存取函数用set_和get_开头，且与访问变量相吻合，比如 set_playerName(); get_studentId();

class Player{
public:
	inline
	void set_playerId(const int k_playerId){return _playerId = k_playerId;}
	int get_playerId() const{return _playerId;}
private:
	int _playerId;
};

6. 枚举命名规则
枚举类名属于类型名，按类命名，枚举值全大写加下划线，并添加 ENUM_ 前缀，比如：ENUM_NAME

7. 宏变量命名规则
如果你一定要用到宏，全大写加下划线，比如：

#define PI_ROUND 3.0